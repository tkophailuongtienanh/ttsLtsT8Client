{"version":3,"sources":["assets/img/login-office.jpeg","assets/img/login-office-dark.jpeg","pages/Authen/Login.js"],"names":["module","exports","Login","navigate","useNavigate","addToast","useToast","token","setToken","useState","Cookie","get","emailRef","useRef","passRef","useEffect","url","headers","console","log","config","method","async","response","fetch","ok","data","json","errorCode","window","location","href","callApi","error","React","createElement","className","aria-hidden","src","ImageLight","alt","ImageDark","Label","Input","ref","type","placeholder","onClick","checkNull","userLogin","email","current","value","password","fetchApi","body","code","set","JSON","stringify","role","message","Link","to"],"mappings":"gIAAAA,EAAOC,QAAU,IAA0B,2C,oBCA3CD,EAAOC,QAAU,IAA0B,gD,iCCA3C,wIAwJeC,UA5If,WACE,MAAMC,EAAWC,eACX,SAAEC,GAAaC,eACdC,EAAOC,GAAYC,mBAASC,IAAOC,IAAI,UACxCC,EAAWC,mBACXC,EAAUD,mBA4DhB,OA3DAE,oBAAU,KACR,IACE,MAAMC,EAAM,gDACNC,EAAU,CACd,eAAgB,oBAEdV,IACFU,EAAuB,cAAI,UAAUV,GAEvCW,QAAQC,IAAI,2BAA4BF,EAAuB,eAG/D,MAAMG,EAAS,CACbC,OAAQ,MACRJ,WAGcK,WACd,MAAMC,QAAiBC,MAAMR,EAAKI,GAClC,GAAIG,EAASE,GAAI,CACf,IAAIC,QAAaH,EAASI,OAC1BT,QAAQC,IAAI,OAAQO,GACE,MAAlBA,EAAKE,WACPvB,EAAS,SAAU,qEAAuC,KAC1DF,EAAS,kBACJ0B,OAAOC,SAASC,KAAO,SAGlCC,GACA,MAAOC,MACR,CAAC1B,IA8BF2B,IAAAC,cAAA,OAAKC,UAAU,kEACbF,IAAAC,cAAA,OAAKC,UAAU,kGACbF,IAAAC,cAAA,OAAKC,UAAU,6CACbF,IAAAC,cAAA,OAAKC,UAAU,2BACbF,IAAAC,cAAA,OACEE,cAAY,OACZD,UAAU,yCACVE,IAAKC,IACLC,IAAI,WAENN,IAAAC,cAAA,OACEE,cAAY,OACZD,UAAU,+CACVE,IAAKG,IACLD,IAAI,YAGRN,IAAAC,cAAA,QAAMC,UAAU,yDACdF,IAAAC,cAAA,OAAKC,UAAU,UACbF,IAAAC,cAAA,MAAIC,UAAU,+DAA8D,SAG5EF,IAAAC,cAACO,QAAK,KACJR,IAAAC,cAAA,YAAM,SACND,IAAAC,cAACQ,QAAK,CACJC,IAAKhC,EACLwB,UAAU,OACVS,KAAK,QACLC,YAAY,kBAGhBZ,IAAAC,cAACO,QAAK,CAACN,UAAU,QACfF,IAAAC,cAAA,YAAM,YACND,IAAAC,cAACQ,QAAK,CACJC,IAAK9B,EACLsB,UAAU,OACVS,KAAK,WACLC,YAAY,qBAGhBZ,IAAAC,cAAA,UACEC,UAAU,8MAGVW,QAzEQzB,UACpB,IAAK0B,YAAUpC,KAAcoC,YAAUlC,GAAU,OACjD,MAAMmC,EAAY,CAChBC,MAAOtC,EAASuC,QAAQC,MACxBC,SAAUvC,EAAQqC,QAAQC,OAE5BlC,QAAQC,IAAI,MAAO8B,GAEnB,MAAM1B,QAAiB+B,YAAS,uBAAwB,CACtDjC,OAAQ,OACRkC,KAAMN,IAGFvB,EAAOH,EAASG,KACD,OAAjBH,EAASiC,MACXtC,QAAQC,IAAIO,GAEZhB,IAAO+C,IAAI,QAAS/B,EAAKnB,OACzBG,IAAO+C,IAAI,OAAQC,KAAKC,UAAUjC,EAAKkC,OACvCpD,EAASkB,EAAKnB,QACLgB,EAASiC,MAClBnD,EACE,SACAkB,EAASiC,KAAO,KAAO9B,EAAKE,UAAY,IAAMF,EAAKmC,QACnD,OAkDO,UAID3B,IAAAC,cAAA,MAAIC,UAAU,SACdF,IAAAC,cAAA,KAAGC,UAAU,QACXF,IAAAC,cAAC2B,IAAI,CACH1B,UAAU,2EACV2B,GAAG,oBACJ,0BAIH7B,IAAAC,cAAA,KAAGC,UAAU,QACXF,IAAAC,cAAC2B,IAAI,CACH1B,UAAU,2EACV2B,GAAG,mBACJ","file":"static/js/13.57570adb.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/login-office.72742c2e.jpeg\";","module.exports = __webpack_public_path__ + \"static/media/login-office-dark.cb4a995f.jpeg\";","import React, { useEffect, useRef, useState } from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\";\n\nimport ImageLight from \"../../assets/img/login-office.jpeg\";\nimport ImageDark from \"../../assets/img/login-office-dark.jpeg\";\nimport { GithubIcon, TwitterIcon } from \"../../icons\";\nimport { Label, Input, Button } from \"@windmill/react-ui\";\nimport Cookie from \"js-cookie\";\nimport { fetchWithAuth, fetchApi } from \"../../utils/callApi\";\nimport checkNull from \"../../utils/formValid\";\nimport { useToast } from \"../../context/ToastContext\";\n\nfunction Login() {\n  const navigate = useNavigate();\n  const { addToast } = useToast();\n  const [token, setToken] = useState(Cookie.get(\"token\"));\n  const emailRef = useRef();\n  const passRef = useRef();\n  useEffect(() => {\n    try {\n      const url = \"https://localhost:7242/api/Authentication/Get\";\n      const headers = {\n        \"Content-Type\": \"application/json\",\n      };\n      if (token) {\n        headers[\"Authorization\"] = `Bearer ${token}`;\n      }\n      console.log(\"headers['Authorization']\", headers[\"Authorization\"]);\n\n      // Thiết lập cấu hình cho fetch\n      const config = {\n        method: \"GET\", // Mặc định là GET\n        headers,\n      };\n\n      const callApi = async () => {\n        const response = await fetch(url, config);\n        if (response.ok) {\n          var data = await response.json();\n          console.log(\"data\", data);\n          if (data.errorCode == 1005) {\n            addToast(\"danger\", \"Vui lòng xác thực email để tiếp tục\", 10000);\n            navigate(\"/confirmEmail\");\n          } else window.location.href = \"/app\";\n        }\n      };\n      callApi();\n    } catch (error) {}\n  }, [token]);\n  const loginBtnClick = async () => {\n    if (!checkNull(emailRef) || !checkNull(passRef)) return;\n    const userLogin = {\n      email: emailRef.current.value,\n      password: passRef.current.value,\n    };\n    console.log(\"log\", userLogin);\n\n    const response = await fetchApi(\"Authentication/Login\", {\n      method: \"POST\",\n      body: userLogin,\n    });\n\n    const data = response.data;\n    if (response.code == \"200\") {\n      console.log(data);\n\n      Cookie.set(\"token\", data.token);\n      Cookie.set(\"role\", JSON.stringify(data.role));\n      setToken(data.token);\n    } else if (response.code) {\n      addToast(\n        \"danger\",\n        response.code + \": \" + data.errorCode + \"-\" + data.message,\n        10000\n      );\n    }\n  };\n  return (\n    <div className=\"flex items-center min-h-screen p-6 bg-gray-50 dark:bg-gray-900\">\n      <div className=\"flex-1 h-full max-w-4xl mx-auto overflow-hidden bg-white rounded-lg shadow-xl dark:bg-gray-800\">\n        <div className=\"flex flex-col overflow-y-auto md:flex-row\">\n          <div className=\"h-32 md:h-auto md:w-1/2\">\n            <img\n              aria-hidden=\"true\"\n              className=\"object-cover w-full h-full dark:hidden\"\n              src={ImageLight}\n              alt=\"Office\"\n            />\n            <img\n              aria-hidden=\"true\"\n              className=\"hidden object-cover w-full h-full dark:block\"\n              src={ImageDark}\n              alt=\"Office\"\n            />\n          </div>\n          <main className=\"flex items-center justify-center p-6 sm:p-12 md:w-1/2\">\n            <div className=\"w-full\">\n              <h1 className=\"mb-4 text-xl font-semibold text-gray-700 dark:text-gray-200\">\n                Login\n              </h1>\n              <Label>\n                <span>Email</span>\n                <Input\n                  ref={emailRef}\n                  className=\"mt-1\"\n                  type=\"email\"\n                  placeholder=\"john@doe.com\"\n                />\n              </Label>\n              <Label className=\"mt-4\">\n                <span>Password</span>\n                <Input\n                  ref={passRef}\n                  className=\"mt-1\"\n                  type=\"password\"\n                  placeholder=\"***************\"\n                />\n              </Label>\n              <button\n                className=\"transition-colors duration-150 font-medium focus:outline-none  \n                py-2 rounded-lg text-sm text-white bg-purple-600 border-0 active:bg-purple-600 \n                hover:bg-purple-700 focus:shadow-outline-purple w-full mt-4\"\n                onClick={loginBtnClick}\n              >\n                Log in\n              </button>\n\n              <hr className=\"my-8\" />\n              <p className=\"mt-4\">\n                <Link\n                  className=\"text-sm font-medium text-purple-600 dark:text-purple-400 hover:underline\"\n                  to=\"/forgot-password\"\n                >\n                  Forgot your password?\n                </Link>\n              </p>\n              <p className=\"mt-1\">\n                <Link\n                  className=\"text-sm font-medium text-purple-600 dark:text-purple-400 hover:underline\"\n                  to=\"/create-account\"\n                >\n                  Create account\n                </Link>\n              </p>\n            </div>\n          </main>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Login;\n"],"sourceRoot":""}